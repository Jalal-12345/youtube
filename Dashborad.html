<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- logo  -->
    <link
      rel="shortcut icon"
      href="https://www.youtube.com/s/desktop/80338919/img/favicon_32x32.png"
      type="image/x-icon"
    />
    <title>واعي لوحة التحكم</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Rubik:wght@500;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <style>
    aside {
      width: 100%;
      height: 100vh;
      font-family: "Rubik", "Poppins", sans-serif;
    }

    aside nav {
      display: flex;
      flex-direction: row-reverse;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    aside nav img {
      width: 100%;
      height: 100%;
      margin-bottom: 15px;
    }

    aside nav div {
      display: flex;
      flex-direction: column;
    }

    input {
      text-align: right;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid;
      font-size: 20px;
      margin-bottom: 15px;
      font-family: "Rubik", "Poppins", sans-serif;
    }

    #uplaodviedo,
    #uplaodimgvideo {
      text-align: center;
      font-size: 20px;
      margin-bottom: 15px;
      cursor: pointer;
      border: 2px dashed;
      padding: 10px;
      background: transparent;
      font-family: "Rubik", "Poppins", sans-serif;
    }

    #submit {
      font-size: 20px;
      font-family: "Rubik", "Poppins", sans-serif;
      background: #222;
      border: none;
      padding: 10px;
      border-radius: 20px;
      cursor: pointer;
      color: red;
    }
  </style>
  <body>
    <div class="container">
      <aside>
        <nav>
          <div>
            <img src="images/youtube-logo.png" alt="" />

            <input type="text" placeholder="عنوان الفيديو" id="title-video" />
            <button id="uplaodviedo">تحميل الفيديو</button>
            <!-- <button id="uplaodimgvideo">تحميل صورة الفيديو</button> -->

            <button id="submit">إرسال</button>
          </div>
        </nav>
      </aside>
    </div>

    <!-- axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- cloudinary -->
    <script
      src="https://widget.cloudinary.com/v2.0/global/all.js"
      type="text/javascript"
    ></script>

    <!-- local upload instantiation -->
    <script src="upload_widget.js" type="text/javascript"></script>
    <script>
      let url = "";
      const cloudName = "donoketph"; // replace with your own cloud name
      const uploadPreset = "uckibu8g"; // replace with your own upload preset

      // Remove the comments from the code below to add
      // additional functionality.
      // Note that these are only a few examples, to see
      // the full list of possible parameters that you
      // can add see:
      //   https://cloudinary.com/documentation/upload_widget_reference

      const myWidget = cloudinary.createUploadWidget(
        {
          cloudName: cloudName,
          uploadPreset: uploadPreset,
          // cropping: true, //add a cropping step
          // showAdvancedOptions: true,  //add advanced options (public_id and tag)
          // sources: [ "local", "url"], // restrict the upload sources to URL and local files
          // multiple: false,  //restrict upload to a single file
          // folder: "user_images", //upload files to the specified folder
          // tags: ["users", "profile"], //add the given tags to the uploaded files
          // context: {alt: "user_uploaded"}, //add the given context data to the uploaded files
          // clientAllowedFormats: ["images"], //restrict uploading to image files only
          // maxImageFileSize: 2000000,  //restrict file size to less than 2MB
          // maxImageWidth: 2000, //Scales the image down to a width of 2000 pixels before uploading
          // theme: "purple", //change to a purple theme
        },
        (error, result) => {
          if (!error && result && result.event === "success") {
            console.log("type", result.info.resource_type);
            console.log("url", result.info.url);
            url = result.info.url;
          }
        }
      );

      document.getElementById("uplaodviedo").addEventListener(
        "click",
        function () {
          myWidget.open();
        },
        false
      );

      document.getElementById("submit").addEventListener("click", () => {
        console.log(url, document.getElementById("title-video").value);
        // axios
        axios
          .post("https://api-youtube-zou4.onrender.com/upload", {
            titleVideo: document.getElementById("title-video").value,
            videoUrl: url,
          })
          .then(function (response) {
            console.log(response);
            alert("تمت بنجاح");
          })
          .catch(function (error) {
            console.log(error);
          });
          document.getElementById("title-video").value = ""
          url = ""

      });
    </script>
  </body>
</html>
